<% if policy(:order).admin_action? %>
	<%= content_for :secondary_navigation do render 'layouts/secondary_navigations/navigation_admin' end %>
<% end %>

<div id='admin-info'>
	<table id='order-sums'>
		<tbody>
			<tr>
				<td>Totaalbedrag over alle orders</td>
				<td><%= currency_symbol %> <%= Order.sum_of_all_orders %></td>
			</tr>
			<tr>
				<td>Totaalbedrag deze maand</td>
				<td><%= currency_symbol %> <%= Order.sum_of_current_months_orders %></td>
			</tr>
			<tr>
				<td>Totaalbedrag vorige maand</td>
				<td><%= currency_symbol %> <%= Order.sum_of_previous_months_orders %></td>
			</tr>
			<tr>
				<td>Totaalbedrag vandaag </td>
				<td><%= currency_symbol %> <%= Order.sum_of_todays_orders %></td>
			</tr>
		</tbody>
	</table>
	<table id='quantity-of-orders'>
		<tbody>
			<tr>
				<td><span class='status-tag problem'>probleem</span></td>
				<td><%= Order.where(status: :problem).count %></td>
			</tr>
			<tr>
				<td><span class='status-tag paid'>betaald</span></td>
				<td><%= Order.where(status: :paid).count %></td>
			</tr>
			<tr>
				<td><span class='status-tag sent'>verzonden</span></td>
				<td><%= Order.where(status: :sent).count %></td>
			</tr>
			<tr>
				<td><span class='status-tag open'>open</span></td>
				<td><%= Order.where(status: :open).count %></td>
			</tr>
		</tbody>
	</table>
</div>

<div id='months'>
	<h4>Totaaloverzicht <small><%= currency_symbol %> / dag</small></h4>
	<%= area_chart (Order.group_by_day(:updated_at).sum(:total_price_cents)).transform_values { |v|
					(v.fdiv(100)).round(2) },
				colors: ['#4c997f'],
				label: "€ dagtotaal" %>
	<div class='month'>
		<h4><%= I18n.l(Time.now, format: "%B").capitalize %> <small><%= currency_symbol %> / dag</small></h4>
		<%= column_chart Order.group_by_day_of_month(:updated_at).sum(:total_price_cents).transform_values { |v|
						(v.fdiv(100)).round(2) },
					colors: ['#65cca9'],
					label: "€ dagtotaal" %>
	</div>
</div>
